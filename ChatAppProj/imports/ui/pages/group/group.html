<!-- Main template -->
<template name="groupPage">
    <!-- Ensuring the user can only acess if logged -->
    {{#unless loggingIn}}
        {{#if currentUser}}
            <div id="groupBox">
                <!-- Top banner (back, group name, settings) -->
                <div id="groupInfo">
                    <div id="goBack">Back</div>
                    {{> groupName}}
                    <div id="groupSettings">Settings</div>
                </div>
                <!-- Sent messages -->
                <div id="messages">
                    {{> groupMessages}}
                </div>
                <!-- Pop up button -->
                <div id="typeMessage">
                    Send message
                </div>
                <!-- Pop-up window -->
                <div id="messageBox">
                    {{> messageBox}}
                </div>
            </div>
        <!-- If not logged, shows 404 page -->
        {{else}}
            {{> rr2nf_01}}
        {{/if}}
    {{/unless}}
</template>

<!-- GROUP NAME -->
<!-- Input for group name -->
<template name="groupName">
    <input type="text" id="groupTitle" placeholder="Group name" value="{{name}}">
</template>

<!-- SENT MESSAGES -->
<template name="groupMessages">
    {{#each sentMessages}}
        {{> displayMessage}}
    {{/each}}
</template>

<!-- Display sent messages: -->
<template name="displayMessage">
    <!-- Priority -->
    <div class="message {{priority}}">
        <!-- Display author and date -->
        <div class="author">{{author}} ({{date}})</div>
        <!-- Display message body -->
        <div class="body">{{message}}</div>
    </div>
</template>

<!-- POP UP -->
<template name="messageBox">
    <!-- Predefined messages -->
    {{#each predefinedMessages}}
        {{> predefinedMessage}}
    {{/each}}
    <!-- Custom messages -->
    {{#each customMessages}}
        {{> customMessage}}
    {{/each}}
</template>

<!-- Predefined messages HTML formatting -->
<template name="predefinedMessage">
    <div class="predefinedMessage" id="{{_id}}">{{message}}</div>
</template>

<!-- Custom messages HTML formatting -->
<template name="customMessage">
    <div class="predefinedMessage" id="{{_id}}">{{message}}</div>
</template>

<!-- 404 REROUTE -->
<template name="rr2nf_01"></template>