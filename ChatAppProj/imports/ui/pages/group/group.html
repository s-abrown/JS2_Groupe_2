<template name="groupPage">
    <!-- Ensuring that you can only see this page if you're logged in with the unless/if statement-->
    {{#unless loggingIn}}
        {{#if currentUser}}
            <div id="groupBox">
                <!-- Top banner with infos and settings -->
                <div id="groupInfo">
                    <div id="goBack">Back</div>
                    {{> groupName}}
                    <div id="groupSettings">Settings</div>
                </div>
                <!-- All messages of the group displayed here -->
                <div id="messages">
                    {{> groupMessages}}
                </div>
                <!-- Button to send a new message -->
                <div id="typeMessage">
                    Send message
                </div>

                <!-- Pop-up window to display predefined messages -->
                <div id="messageBox">
                    {{> messageBox}}
                </div>
            </div>
        <!-- If you're not logged in, you're sent to the 404 page-->
        {{else}}
        <!-- This is the 404 page reroute-->
            {{> rr2nf_01}}
        {{/if}}
    {{/unless}}
</template>

<!--FOR MESSAGE POP UP (predefined) -->
<!-- Template for predefined messages -->
<template name="messageBox">
    <!-- Display all the predefined messages on the page -->
    {{#each predefinedMessages}}
        {{> predefinedMessage}}
    {{/each}}
    <!-- Display all the custom messages on the page -->
    {{#each customMessages}}
        {{> customMessage}}
    {{/each}}
</template>

<!-- Template for formatting all the predefined message -->
<template name="predefinedMessage">
    <div class="predefinedMessage" id="{{_id}}">{{message}}</div>
</template>

<!-- Template for formatting all the custom message -->
<template name="customMessage">
    <div class="predefinedMessage" id="{{_id}}">{{message}}</div>
</template>

<!-- FOR SENT MESSAGES-->
<!-- Messages to be displayed-->
<template name="groupMessages">
    {{#each sentMessages}}
        {{> displayMessage}}
    {{/each}}
</template>

<!-- To display messages: -->
<template name="displayMessage">
    <div class="message {{priority}}">
        <!-- Display the author of the message -->
        <div class="author">{{author}} ({{date}})</div>
        <!-- Display the message itself -->
        <div class="body">{{message}}</div>
    </div>
</template>

<template name="groupName">
    <input type="text" id="groupTitle" placeholder="Group name" value="{{name}}">
</template>

<!-- TEMPLATE TO REROUTE TO 404 PAGE IF USER IS NOT LOGGED IN -->
<template name="rr2nf_01"></template>